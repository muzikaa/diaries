---
import Post from "../components/Post.astro";

const { edit } = Astro.props;

const res = await fetch('/api/posts');
if (!res.ok) {
  // handle unauthorized or error states, maybe redirect or show message
  throw new Error('Failed to load posts');
}
const posts = await res.json();
---
<h1 class="text-5xl pd-3 emphasis">Posts</h1>

<ul>
  {
    posts.map((post: any) => (
            <Post post={post} edit={edit}></Post>
    ))
  }
</ul>